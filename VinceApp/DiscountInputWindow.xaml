<Window x:Class="VinceApp.DiscountInputWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="إدخال الخصم" Height="620" Width="500"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize" WindowStyle="None"
        Background="White" FlowDirection="RightToLeft"
        BorderBrush="#F2B8B5" BorderThickness="1">

    <Window.Resources>

        <DropShadowEffect x:Key="CardShadow" BlurRadius="8" ShadowDepth="3" Opacity="0.18" Color="#000000"/>

        <!-- Numpad Button (Touch friendly + ثابت القياس) -->
        <Style x:Key="NumpadButtonStyle" TargetType="Button">
            <Setter Property="FontSize" Value="26"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#455A64"/>
            <Setter Property="BorderBrush" Value="#E7E2DC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="6"/>
            <Setter Property="MinHeight" Value="62"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="16"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="8" ShadowDepth="2" Opacity="0.12" Color="#000000"/>
                            </Border.Effect>

                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                            </Border.RenderTransform>

                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.92"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#F2F2F2"/>
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.96" ScaleY="0.96"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect BlurRadius="7" ShadowDepth="1" Opacity="0.10" Color="#000000"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Action Buttons -->
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Height" Value="58"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="18,8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="16"
                                Padding="{TemplateBinding Padding}">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="8" ShadowDepth="2" Opacity="0.16" Color="#000000"/>
                            </Border.Effect>

                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                            </Border.RenderTransform>

                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.92"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.97" ScaleY="0.97"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Grid Margin="18">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <StackPanel Grid.Row="0" Margin="0,0,0,12">
            <TextBlock Text="تحديد قيمة الخصم"
                       HorizontalAlignment="Center"
                       FontSize="22"
                       FontWeight="Bold"
                       Foreground="#5D4037"/>
            <TextBlock Text="أدخل قيمة الخصم بالأرقام ثم اضغط تأكيد"
                       HorizontalAlignment="Center"
                       FontSize="12"
                       Foreground="#7A726C"
                       Margin="0,6,0,0"/>
        </StackPanel>

        <!-- Display Card -->
        <Border Grid.Row="1"
                Background="#FFF5F5"
                BorderBrush="#F2B8B5"
                BorderThickness="1"
                CornerRadius="16"
                Padding="14"
                Margin="0,0,0,12"
                Effect="{StaticResource CardShadow}">
            <StackPanel>
                <TextBlock Text="القيمة الحالية:"
                           FontSize="12"
                           Foreground="#7A726C"
                           FontWeight="SemiBold"/>

                <DockPanel Margin="0,8,0,0">
                    <TextBlock Text="د.ع"
                               DockPanel.Dock="Left"
                               Foreground="#D32F2F"
                               FontWeight="Bold"
                               FontSize="14"
                               VerticalAlignment="Bottom"
                               Margin="6,0,0,6"/>
                    <TextBlock x:Name="txtDisplay"
                               Text="0"
                               FontSize="40"
                               FontWeight="ExtraBold"
                               Foreground="#D32F2F"
                               HorizontalAlignment="Center"/>
                </DockPanel>

                <TextBlock x:Name="txtError"
                           Text=""
                           FontSize="12"
                           Foreground="#C62828"
                           HorizontalAlignment="Center"
                           Margin="0,6,0,0"/>
            </StackPanel>
        </Border>

        <!-- Numpad (UniformGrid = نفس القياس دائمًا) -->
        <UniformGrid Grid.Row="2" Columns="3" Rows="4" Margin="0,0,0,12">
            <Button Content="7" Style="{StaticResource NumpadButtonStyle}" Click="Num_Click"/>
            <Button Content="8" Style="{StaticResource NumpadButtonStyle}" Click="Num_Click"/>
            <Button Content="9" Style="{StaticResource NumpadButtonStyle}" Click="Num_Click"/>

            <Button Content="4" Style="{StaticResource NumpadButtonStyle}" Click="Num_Click"/>
            <Button Content="5" Style="{StaticResource NumpadButtonStyle}" Click="Num_Click"/>
            <Button Content="6" Style="{StaticResource NumpadButtonStyle}" Click="Num_Click"/>

            <Button Content="1" Style="{StaticResource NumpadButtonStyle}" Click="Num_Click"/>
            <Button Content="2" Style="{StaticResource NumpadButtonStyle}" Click="Num_Click"/>
            <Button Content="3" Style="{StaticResource NumpadButtonStyle}" Click="Num_Click"/>

            <Button Content="C" Style="{StaticResource NumpadButtonStyle}"
                    Background="#FFEBEE" Foreground="#C62828"
                    Click="Clear_Click"/>

            <Button Content="0" Style="{StaticResource NumpadButtonStyle}" Click="Num_Click"/>

            <Button Content="⌫" Style="{StaticResource NumpadButtonStyle}"
                    FontSize="22"
                    Background="#FFF8E1" Foreground="#E65100"
                    Click="Back_Click"/>
        </UniformGrid>

        <!-- Actions -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="12"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Content="تأكيد الخصم" IsDefault="True"
                    Grid.Column="0"
                    Click="Confirm_Click"
                    Background="#2E7D32"
                    Foreground="White"
                    Style="{StaticResource ActionButtonStyle}"/>

            <Button Content="إلغاء" IsCancel="True"
                    Grid.Column="2"
                    Click="Cancel_Click"
                    Width="120"
                    Background="#607D8B"
                    Foreground="White"
                    Style="{StaticResource ActionButtonStyle}"/>
        </Grid>

    </Grid>
</Window>
