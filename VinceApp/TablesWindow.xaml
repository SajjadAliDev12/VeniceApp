<Window x:Class="VinceApp.TablesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="clr-namespace:VinceApp"
        Title="اختيار الطاولة" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized" FlowDirection="RightToLeft" WindowStyle="None"
        Background="#F0F0F0" ContentRendered="Window_ContentRendered">
    <Grid>
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="80"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" Margin="0,0,0,20">
                <TextBlock Text="يرجى اختيار طاولة لبدء الطلب" 
                       FontSize="30" FontWeight="Bold" Foreground="#333" 
                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                <local:DigitalClock HorizontalAlignment="Right" VerticalAlignment="Center"/>
            </Grid>

            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" Background="White" CornerRadius="10" BorderBrush="#DDD" BorderThickness="1" Padding="20" Margin="0,0,10,0">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <WrapPanel x:Name="TablesPanel" HorizontalAlignment="Center"/>
                    </ScrollViewer>
                </Border>

                <Border Grid.Column="1" Background="#333" CornerRadius="10" BorderBrush="#444" BorderThickness="1" Padding="10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="🛍️ سفري معلق" Foreground="White" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,10"/>

                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                            <StackPanel x:Name="TakeawayPanel"/>
                        </ScrollViewer>
                    </Grid>
                </Border>
            </Grid>

            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">

                <StackPanel.Resources>
                    <Style TargetType="Button">
                        <Setter Property="Height" Value="55"/>
                        <Setter Property="FontSize" Value="16"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="Margin" Value="5,0"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="10" 
                                Padding="{TemplateBinding Padding}"
                                BorderBrush="Transparent"
                                BorderThickness="2">

                                        <Border.RenderTransform>
                                            <ScaleTransform ScaleX="1" ScaleY="1"/>
                                        </Border.RenderTransform>

                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" 
                                              Effect="{x:Null}"/>
                                    </Border>

                                    <ControlTemplate.Triggers>

                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                                            <Setter TargetName="border" Property="BorderBrush" Value="#FFFFFF"/>
                                            <Setter TargetName="border" Property="BorderThickness" Value="2"/>
                                        </Trigger>

                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="border" Property="RenderTransform">
                                                <Setter.Value>
                                                    <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                                                </Setter.Value>
                                            </Setter>
                                            <Setter TargetName="border" Property="Opacity" Value="1"/>
                                        </Trigger>

                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter TargetName="border" Property="Background" Value="#CCC"/>
                                            <Setter Property="Foreground" Value="#888"/>
                                        </Trigger>

                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </StackPanel.Resources>

                <Button x:Name="btnNewTakeaway"
            Content="🛍️ طلب سفري جديد" 
            Width="220" 
            Background="#9C27B0" 
            FontSize="20"
            Click="TakeawayButton_Click"/>

                <Button x:Name="btnRefresh"
            Content="🔄 تحديث" 
            Width="140" 
            Background="#795548" 
            Click="RefreshButton_Click"/>

                <Button x:Name="btnAdmin"
            Content="👔 الإدارة" 
            Width="140" 
            Background="#455A64" 
            Click="OpenAdmin_Click"/>

                <Button x:Name="btnSettings"
            Content="⚙️ الإعدادات" 
            Width="140" 
            Background="#607D8B"
            Click="SettingsButton_Click"/>

                <Button x:Name="btnExit"
            Content="🚪 خروج" 
            Width="120" 
            Background="#D32F2F" 
            Click="ExitButton_Click"/>

            </StackPanel>
            <!-- Loading Overlay -->
            <Grid x:Name="LoadingOverlay"
      Grid.RowSpan="3"
      Visibility="Collapsed"
      Background="#80000000">

                <Border Background="White"
            Width="420"
            Padding="22"
            CornerRadius="16"
            HorizontalAlignment="Center"
            VerticalAlignment="Center">

                    <StackPanel>
                        <TextBlock Text="جاري التحميل..."
                       FontSize="22"
                       FontWeight="Bold"
                       Foreground="#333"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,12"/>

                        <ProgressBar IsIndeterminate="True"
                         Height="12"
                         Margin="0,0,0,12"/>

                        <TextBlock x:Name="txtLoadingHint"
                       Text="يتم تجهيز الطاولات والطلبات"
                       FontSize="14"
                       Foreground="#666"
                       HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </Grid>

        </Grid>
        <Grid x:Name="ToastOverlay" IsHitTestVisible="True" Panel.ZIndex="9999" Background="{x:Null}">
            <StackPanel x:Name="NotificationArea"
             HorizontalAlignment="Left"
             VerticalAlignment="Top"
             Margin="20"
             Width="360"/>
        </Grid>
    </Grid>
</Window>