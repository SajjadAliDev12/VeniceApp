<Page x:Class="VinceApp.Pages.UsersPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="إدارة المستخدمين" FlowDirection="RightToLeft" Background="White">

    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="350"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="#F5F5F5" CornerRadius="10" Padding="15" Margin="0,0,20,0">
            <StackPanel>
                <TextBlock Text="بيانات المستخدم" FontSize="18" FontWeight="Bold" Foreground="#333" Margin="0,0,0,15"/>

                <TextBlock Text="اسم المستخدم (يستخدم لتسجيل الدخول للنظام):" Foreground="Gray"/>
                <TextBox x:Name="txtUsername" Height="35" FontSize="14" Padding="5" Margin="0,0,0,10"/>
                <TextBlock Text="الاسم الكامل (كما سيظهر في الفاتورة):" Foreground="Gray"/>
                <TextBox x:Name="txtFullName" Height="35" FontSize="14" Padding="5" Margin="0,0,0,10"/>
                <TextBlock Text="نوع الصلاحية:" Foreground="Gray"/>
                <ComboBox x:Name="cmbRole" Height="35" FontSize="14" Margin="0,0,0,10">
                </ComboBox>

                <Separator Margin="0,10"/>

                <TextBlock Text="كلمة المرور:" Foreground="Gray"/>
                <PasswordBox x:Name="txtPassword" Height="35" FontSize="14" Padding="5" Margin="0,0,0,5"/>
                <TextBlock Text="* اتركها فارغة عند التعديل للإبقاء على القديمة" FontSize="10" Foreground="Red" Margin="0,0,0,10"/>

                <Separator Margin="0,10"/>

                <TextBlock Text="عنوان البريد الالكتروني :" Foreground="Gray"/>
                <TextBox x:Name="txtEmail" Height="35" FontSize="14" Padding="5" Margin="0,0,0,10"/>

                

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Content="💾 حفظ" Width="100" Height="40" Background="#4CAF50" Foreground="White" FontWeight="Bold" Margin="5" Click="Save_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button Content="إلغاء" Width="100" Height="40" Background="#E0E0E0" Foreground="#333" Margin="5" Click="Button_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </StackPanel>
        </Border>

        <DataGrid x:Name="dgUsers" Grid.Column="1" AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="True" HeadersVisibility="Column" Background="White" RowHeight="40">
            <DataGrid.Columns>
                <DataGridTextColumn Header="الرقم" Binding="{Binding Id}" Width="60"/>
                <DataGridTextColumn Header="اسم المستخدم" Binding="{Binding Username}" Width="*" FontWeight="Bold"/>
                <DataGridTextColumn Header="الصلاحية" Binding="{Binding Role}" Width="100"/>

                <DataGridTemplateColumn Header="العمليات" Width="160">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <Button Content="✏️ تعديل" Width="70" Height="30" Background="#2196F3" Foreground="White" Margin="2" Click="Edit_Click" Tag="{Binding Id}">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Button Content="🗑️ حذف" Width="70" Height="30" Background="#F44336" Foreground="White" Margin="2" Click="Delete_Click" Tag="{Binding Id}">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Page>