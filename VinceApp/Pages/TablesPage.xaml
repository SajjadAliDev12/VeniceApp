<Page x:Class="VinceApp.Pages.TablesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="إدارة الطاولات" FlowDirection="RightToLeft" Background="White">

    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="#F5F5F5" CornerRadius="10" Padding="15" VerticalAlignment="Top" Margin="0,0,20,0">
            <StackPanel>
                <TextBlock Text="بيانات الطاولة" FontSize="18" FontWeight="Bold" Foreground="#333" Margin="0,0,0,15"/>

                <TextBlock Text="رقم الطاولة (مثال: 1, 5):" Foreground="Gray"/>
                <TextBox x:Name="txtTableNumber" Height="35" FontSize="14" Padding="5" Margin="0,0,0,10"/>

                <TextBlock Text="اسم/وصف الطاولة (مثال: VIP):" Foreground="Gray"/>
                <TextBox x:Name="txtTableName" Height="35" FontSize="14" Padding="5" Margin="0,0,0,15"/>

                <Button x:Name="btnSave" Content="➕ إضافة" Height="40" Background="#4CAF50" Foreground="White" FontWeight="Bold" Click="SaveTable_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="btnBorder" Background="{TemplateBinding Background}" CornerRadius="5">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <Button x:Name="btnCancel" Content="إلغاء" Height="30" Margin="0,10,0,0" Background="Gray" Foreground="White" Visibility="Collapsed" Click="CancelEdit_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Border>

        <DataGrid x:Name="dgTables" Grid.Column="1" AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="True" HeadersVisibility="Column" Background="White" RowHeight="40">
            <DataGrid.Columns>
                <DataGridTextColumn Header="رقم الطاولة" Binding="{Binding TableNumber}" Width="100" FontWeight="Bold"/>
                <DataGridTextColumn Header="اسم/وصف" Binding="{Binding TableName}" Width="*"/>

                <DataGridTemplateColumn Header="الحالة" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Status}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="إجراءات" Width="140">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">

                                <Button Content="✏️" Width="40" Height="30" Margin="0,0,5,0" Background="#FFA000" Foreground="White" Click="EditTable_Click" Tag="{Binding Id}" ToolTip="تعديل">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>

                                <Button Content="🗑️" Width="40" Height="30" Background="#F44336" Foreground="White" Click="DeleteTable_Click" Tag="{Binding Id}" ToolTip="حذف">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>

                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Page>